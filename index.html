<!doctype html>
<html lang="en">
  <head>
    <script>
      (async () => {
            const path = window.location.pathname;
        const promiseMatch = path.match(/^\/promises\/([^\/]+)$/);
        
        if (!promiseMatch) return;
        
        const slug = promiseMatch[1];
        const supabaseUrl = 'https://vjtltqxakolhzlqdnhop.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZqdGx0cXhha29saHpscWRuaG9wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDk3NTc5NzQsImV4cCI6MTkyNTMzMzk3NH0.5vBf9RLzz9LfVxOF9zBnE5QEtR1wQlC_fJ6B1Q0VYTE';
        
        try {
                const response = await fetch(`${supabaseUrl}/rest/v1/promises?url_slugs=eq.${slug}&select=headline,short_description,status`, {
                          headers: { apikey: supabaseKey }
      });
          const data = await response.json();
          const promise = data[0];
          
          if (!promise) return;
          
          const url = `https://mamdanitracker.nyc/promises/${slug}`;
          const title = `${promise.headline} | Mamdani Tracker`;
          const desc = promise.short_description || `Track: ${promise.headline}`;
          
          document.title = title;
          document.querySelector('link[rel="canonical"]').href = url;
          document.querySelector('meta[name="description"]').content = desc;
          document.querySelector('meta[property="og:title"]').content = title;
          document.querySelector('meta[property="og:description"]').content = desc;
          document.querySelector('meta[property="og:url"]').content = url;
      } catch (e) {
              console.error('SEO update failed:', e);
      }
      })();
    </script>script>
  </script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-40865MB76X"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-40865MB76X');
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://mamdanitracker.nyc/" />
    
    <!-- Primary Meta Tags -->
    <title>Mamdani Tracker | Tracking NYC Mayor Zohran Mamdani's Promises & Actions</title>
    <meta name="description" content="An independent, nonpartisan public-interest tracker of NYC Mayor Zohran Mamdani's campaign promises, policy positions, and mayoral actions. Made for New Yorkers, by and with New Yorkers." />
    <meta name="author" content="Mamdani Tracker" />
    <meta name="robots" content="index, follow" />
    <meta name="googlebot" content="index, follow" />
    
    <!-- RSS Feed Auto-Discovery -->
    <link rel="alternate" type="application/rss+xml" title="Mamdani Tracker RSS Feed" href="https://mamdanitracker.nyc/rss.xml" />
    
    <!-- Favicon -->
    <link rel="icon" href="/favicon.png" type="image/png" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://mamdanitracker.nyc/" />
    <meta property="og:title" content="Mamdani Tracker | Tracking NYC Mayor Zohran Mamdani's Promises & Actions" />
    <meta property="og:description" content="An independent, nonpartisan public-interest tracker of NYC Mayor Zohran Mamdani's campaign promises, policy positions, and mayoral actions. Made for New Yorkers, by and with New Yorkers." />
    <meta property="og:image" content="https://mamdanitracker.nyc/og-image.png" />
    <meta property="og:site_name" content="Mamdani Tracker" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Mamdani Tracker | Tracking NYC Mayor Zohran Mamdani's Promises & Actions" />
    <meta name="twitter:description" content="An independent, nonpartisan public-interest tracker of NYC Mayor Zohran Mamdani's campaign promises, policy positions, and mayoral actions. Made for New Yorkers, by and with New Yorkers." />
    <meta name="twitter:image" content="https://mamdanitracker.nyc/og-image.png" />
  </head>

  <body>
    <noscript>
      <div style="max-width: 800px; margin: 0 auto; padding: 40px 20px; font-family: system-ui, sans-serif;">
        <h1>Mamdani Tracker: Tracking NYC Mayor Zohran Mamdani's Promises and Actions</h1>
        <p>Mamdani Tracker is an independent, nonpartisan public-interest website that tracks New York City Mayor Zohran Mamdani's campaign promises, policy positions, mayoral actions, and key appointments.</p>
        <p>Please enable JavaScript to use this application.</p>
      </div>
    </noscript>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>